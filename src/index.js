import Logger from './logger.js';
import Core from './module/index.js';

globalThis.logger = new Logger({});

const core = new Core({
    database: {
        host: '127.0.0.1',
        port: 27017,
        dbName: 'test-motleycrowd',
        model: {
            KVData: {
                collection: 'kvdata',
            },
            User: {
                collection: 'user',
            },
            Game: {
                collection: 'game',
            },
            Score: {
                collection: 'score',
            },
        }
    },
    question: {
    },
    session: {
        host: '127.0.0.1',
        port: 1919,
    },
    user: {
        authLimit: 5000,
        timeout: 30000,
    },
    game: {
        types: [
            [10, {
                limit: 10,
                pool: 10,
                reward: 10,
            }],
            [100, {
                limit: 100,
                pool: 100,
                reward: 100,
            }]
        ],
        rewards: [
            [10, [
                [  1, {rank:[ 10,  1], money: {m1: 150, m0: 1}}],
                [  2, {rank:[ 10,  2], money: {m1: 100}}],
                [  3, {rank:[ 10,  3], money: {m1:  50}}],
                [  4, {rank:[ 10,  4], money: {m1:  25}}],
                [  5, {rank:[ 10,  5], money: {m1:  21}}],
                [  6, {rank:[ 10,  6], money: {m1:  17}}],
                [  7, {rank:[ 10,  7], money: {m1:  13}}],
                [  8, {rank:[ 10,  8], money: {m1:   9}}],
                [  9, {rank:[ 10,  9], money: {m1:   5}}],
                [ 10, {rank:[ 10, 10], money: {m1:   1}}],
            ]],
            [100, [
                [  1, {rank:[100,  1], money: {m1: 300, m0: 10}}],
                [  2, {rank:[100,  2], money: {m1: 200}}],
                [  3, {rank:[100,  3], money: {m1: 195}}],
                [  4, {rank:[100,  4], money: {m1: 190}}],
                [  5, {rank:[100,  5], money: {m1: 185}}],
                [  6, {rank:[100,  6], money: {m1: 180}}],
                [  7, {rank:[100,  7], money: {m1: 175}}],
                [  8, {rank:[100,  8], money: {m1: 170}}],
                [  9, {rank:[100,  9], money: {m1: 165}}],
                [ 10, {rank:[100, 10], money: {m1: 160}}],
                [ 11, {rank:[100, 11], money: {m1: 129}}],
                [ 12, {rank:[100, 12], money: {m1: 126}}],
                [ 13, {rank:[100, 13], money: {m1: 123}}],
                [ 14, {rank:[100, 14], money: {m1: 120}}],
                [ 15, {rank:[100, 15], money: {m1: 117}}],
                [ 16, {rank:[100, 16], money: {m1: 114}}],
                [ 17, {rank:[100, 17], money: {m1: 111}}],
                [ 18, {rank:[100, 18], money: {m1: 108}}],
                [ 19, {rank:[100, 19], money: {m1: 105}}],
                [ 20, {rank:[100, 20], money: {m1: 102}}],
                [ 21, {rank:[100, 21], money: {m1:  99}}],
                [ 22, {rank:[100, 22], money: {m1:  96}}],
                [ 23, {rank:[100, 23], money: {m1:  93}}],
                [ 24, {rank:[100, 24], money: {m1:  90}}],
                [ 25, {rank:[100, 25], money: {m1:  87}}],
                [ 26, {rank:[100, 26], money: {m1:  84}}],
                [ 27, {rank:[100, 27], money: {m1:  81}}],
                [ 28, {rank:[100, 28], money: {m1:  78}}],
                [ 29, {rank:[100, 29], money: {m1:  75}}],
                [ 30, {rank:[100, 30], money: {m1:  72}}],
                [ 31, {rank:[100, 31], money: {m1:  70}}],
                [ 32, {rank:[100, 32], money: {m1:  69}}],
                [ 33, {rank:[100, 33], money: {m1:  68}}],
                [ 34, {rank:[100, 34], money: {m1:  67}}],
                [ 35, {rank:[100, 35], money: {m1:  66}}],
                [ 36, {rank:[100, 36], money: {m1:  65}}],
                [ 37, {rank:[100, 37], money: {m1:  64}}],
                [ 38, {rank:[100, 38], money: {m1:  63}}],
                [ 39, {rank:[100, 39], money: {m1:  62}}],
                [ 40, {rank:[100, 40], money: {m1:  61}}],
                [ 41, {rank:[100, 41], money: {m1:  60}}],
                [ 42, {rank:[100, 42], money: {m1:  59}}],
                [ 43, {rank:[100, 43], money: {m1:  58}}],
                [ 44, {rank:[100, 44], money: {m1:  57}}],
                [ 45, {rank:[100, 45], money: {m1:  56}}],
                [ 46, {rank:[100, 46], money: {m1:  55}}],
                [ 47, {rank:[100, 47], money: {m1:  54}}],
                [ 48, {rank:[100, 48], money: {m1:  53}}],
                [ 49, {rank:[100, 49], money: {m1:  52}}],
                [ 50, {rank:[100, 50], money: {m1:  51}}],
                [ 51, {rank:[100, 51], money: {m1:  50}}],
                [ 52, {rank:[100, 52], money: {m1:  49}}],
                [ 53, {rank:[100, 53], money: {m1:  48}}],
                [ 54, {rank:[100, 54], money: {m1:  47}}],
                [ 55, {rank:[100, 55], money: {m1:  46}}],
                [ 56, {rank:[100, 56], money: {m1:  45}}],
                [ 57, {rank:[100, 57], money: {m1:  44}}],
                [ 58, {rank:[100, 58], money: {m1:  43}}],
                [ 59, {rank:[100, 59], money: {m1:  42}}],
                [ 60, {rank:[100, 60], money: {m1:  41}}],
                [ 61, {rank:[100, 61], money: {m1:  40}}],
                [ 62, {rank:[100, 62], money: {m1:  39}}],
                [ 63, {rank:[100, 63], money: {m1:  38}}],
                [ 64, {rank:[100, 64], money: {m1:  37}}],
                [ 65, {rank:[100, 65], money: {m1:  36}}],
                [ 66, {rank:[100, 66], money: {m1:  35}}],
                [ 67, {rank:[100, 67], money: {m1:  34}}],
                [ 68, {rank:[100, 68], money: {m1:  33}}],
                [ 69, {rank:[100, 69], money: {m1:  32}}],
                [ 70, {rank:[100, 70], money: {m1:  31}}],
                [ 71, {rank:[100, 71], money: {m1:  30}}],
                [ 72, {rank:[100, 72], money: {m1:  29}}],
                [ 73, {rank:[100, 73], money: {m1:  28}}],
                [ 74, {rank:[100, 74], money: {m1:  27}}],
                [ 75, {rank:[100, 75], money: {m1:  26}}],
                [ 76, {rank:[100, 76], money: {m1:  25}}],
                [ 77, {rank:[100, 77], money: {m1:  24}}],
                [ 78, {rank:[100, 78], money: {m1:  23}}],
                [ 79, {rank:[100, 79], money: {m1:  22}}],
                [ 80, {rank:[100, 80], money: {m1:  21}}],
                [ 81, {rank:[100, 81], money: {m1:  20}}],
                [ 82, {rank:[100, 82], money: {m1:  19}}],
                [ 83, {rank:[100, 83], money: {m1:  18}}],
                [ 84, {rank:[100, 84], money: {m1:  17}}],
                [ 85, {rank:[100, 85], money: {m1:  16}}],
                [ 86, {rank:[100, 86], money: {m1:  15}}],
                [ 87, {rank:[100, 87], money: {m1:  14}}],
                [ 88, {rank:[100, 88], money: {m1:  13}}],
                [ 89, {rank:[100, 89], money: {m1:  12}}],
                [ 90, {rank:[100, 90], money: {m1:  11}}],
                [ 91, {rank:[100, 91], money: {m1:  10}}],
                [ 92, {rank:[100, 92], money: {m1:   9}}],
                [ 93, {rank:[100, 93], money: {m1:   8}}],
                [ 94, {rank:[100, 94], money: {m1:   7}}],
                [ 95, {rank:[100, 95], money: {m1:   6}}],
                [ 96, {rank:[100, 96], money: {m1:   5}}],
                [ 97, {rank:[100, 97], money: {m1:   4}}],
                [ 98, {rank:[100, 98], money: {m1:   3}}],
                [ 99, {rank:[100, 99], money: {m1:   2}}],
                [100, {rank:[100,100], money: {m1:   1}}],
            ]],
        ]
    },
    logger: {
        disable: true,
    },
    rank: {
        cron: '0 0 */1 * * *',
    }
});
await core.initialize();
global.shutdown = ()=>core.shutdown();
global.core = core;